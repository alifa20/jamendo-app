{
  "version": "0.7.1",
  "meta": {
    "version": "1.0.0",
    "lastUpdated": "2025-11-21T10:24:42.675Z"
  },
  "workUnits": {
    "FOUND-001": {
      "id": "FOUND-001",
      "title": "Conduct Foundation Event Storm for Foundation",
      "status": "done",
      "createdAt": "2025-11-21T04:46:59.781Z",
      "updatedAt": "2025-11-21T04:52:39.894Z",
      "stateHistory": [
        {
          "state": "backlog",
          "timestamp": "2025-11-21T04:46:59.781Z"
        },
        {
          "state": "specifying",
          "timestamp": "2025-11-21T04:47:54.865Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-11-21T04:52:26.148Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-11-21T04:52:33.424Z"
        },
        {
          "state": "done",
          "timestamp": "2025-11-21T04:52:39.894Z"
        }
      ],
      "description": "Complete the foundation by capturing domain architecture through Foundation Event Storm.\n\nUse these commands to populate foundation.json eventStorm field:\n- fspec add-foundation-bounded-context <name>\n- fspec add-aggregate-to-foundation <context> <aggregate>\n- fspec add-domain-event-to-foundation <context> <event>\n- fspec show-foundation-event-storm\n\nWhy this matters:\n- Establishes bounded contexts for domain-driven design\n- Enables tag ontology generation from domain model\n- Provides foundation for architectural documentation\n- Supports EXMAP-004 tag discovery workflow\n\nSee spec/CLAUDE.md \"Foundation Event Storm\" section for detailed guidance.",
      "type": "task",
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-11-21T04:52:39.894Z"
    },
    "COMP-001": {
      "id": "COMP-001",
      "title": "Simplify SearchBar debounce implementation",
      "type": "task",
      "status": "backlog",
      "createdAt": "2025-11-21T05:45:28.484Z",
      "updatedAt": "2025-11-21T05:45:28.484Z",
      "description": "Refactor SearchBar component to use a single useEffect or custom hook for debouncing, eliminating the dependency array issue with onChangeText callback. Current implementation has two useEffect hooks that can cause unnecessary re-renders when parent doesn't memoize the callback.",
      "children": []
    },
    "JAM-001": {
      "id": "JAM-001",
      "title": "Setup project dependencies and package structure",
      "type": "story",
      "status": "implementing",
      "createdAt": "2025-11-21T09:26:15.933Z",
      "updatedAt": "2025-11-21T09:59:40.333Z",
      "description": "Install RTK Query, audio libraries (expo-audio, react-native-audio-pro), FlashList, environment variables support. Create rtk-services and components package directories",
      "epic": "jamendo-app",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-11-21T09:33:33.209Z"
        },
        {
          "state": "testing",
          "timestamp": "2025-11-21T09:54:54.969Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-11-21T09:59:40.333Z"
        }
      ],
      "userStory": {
        "role": "developer",
        "action": "set up project dependencies and package structure",
        "benefit": "I can start building features with the required libraries"
      },
      "questions": [
        {
          "id": 0,
          "text": "@human: Should we install @reduxjs/toolkit and configure RTK Query with a base API service, or just install the package?",
          "deleted": false,
          "createdAt": "2025-11-21T09:34:25.039Z",
          "selected": true,
          "answered": true,
          "answer": "RTK Query is already configured in @packages/rtk-services/, so we can skip this"
        },
        {
          "id": 1,
          "text": "@human: Should we install both expo-audio and react-native-audio-pro, or choose one? What's the preferred audio solution?",
          "deleted": false,
          "createdAt": "2025-11-21T09:34:44.572Z",
          "selected": true,
          "answered": true,
          "answer": "Use expo-audio for now"
        },
        {
          "id": 2,
          "text": "@human: For the rtk-services package, should it be named @jamendo/rtk-services? What about the components package name?",
          "deleted": false,
          "createdAt": "2025-11-21T09:34:51.686Z",
          "selected": true,
          "answered": true,
          "answer": "Yes, follow @jamendo/ naming convention (already done)"
        },
        {
          "id": 3,
          "text": "@human: What specific environment variables need to be configured besides EXPO_PUBLIC_JAMENDO_CLIENT_ID?",
          "deleted": false,
          "createdAt": "2025-11-21T09:35:26.763Z",
          "selected": true,
          "answered": true,
          "answer": "EXPO_PUBLIC_JAMENDO_CLIENT_ID (required), EXPO_PUBLIC_JAMENDO_API_URL (optional, defaults to https://api.jamendo.com/v3.0)"
        },
        {
          "id": 4,
          "text": "@human: Should FlashList replace existing FlatList usage in the codebase, or is it only for new features?",
          "deleted": false,
          "createdAt": "2025-11-21T09:35:37.035Z",
          "selected": true,
          "answered": true,
          "answer": "No FlatList exists currently. Use FlashList for all list implementations going forward. Do not remove or touch FlatList if found."
        }
      ],
      "nextQuestionId": 5,
      "rules": [
        {
          "id": 0,
          "text": "expo-audio must be installed for audio playback functionality",
          "deleted": false,
          "createdAt": "2025-11-21T09:39:04.742Z"
        },
        {
          "id": 1,
          "text": "@shopify/flash-list must be installed for performant list rendering",
          "deleted": false,
          "createdAt": "2025-11-21T09:39:09.369Z"
        },
        {
          "id": 2,
          "text": "Environment variables must be configured in .env file with EXPO_PUBLIC_JAMENDO_CLIENT_ID (required)",
          "deleted": false,
          "createdAt": "2025-11-21T09:39:14.321Z"
        },
        {
          "id": 3,
          "text": "All installed packages must appear in package.json dependencies",
          "deleted": false,
          "createdAt": "2025-11-21T09:39:20.055Z"
        },
        {
          "id": 4,
          "text": "@jamendo/components package must be added as dependency in apps/example",
          "deleted": false,
          "createdAt": "2025-11-21T09:41:30.829Z"
        },
        {
          "id": 5,
          "text": "@jamendo/rtk-services package must be added as dependency in apps/example",
          "deleted": false,
          "createdAt": "2025-11-21T09:41:35.691Z"
        }
      ],
      "nextRuleId": 6,
      "examples": [
        {
          "id": 0,
          "text": "Developer runs 'pnpm add expo-audio' in apps/example directory, expo-audio appears in package.json",
          "deleted": false,
          "createdAt": "2025-11-21T09:40:38.228Z"
        },
        {
          "id": 1,
          "text": "Developer runs 'pnpm add @shopify/flash-list' in apps/example directory, @shopify/flash-list appears in package.json",
          "deleted": false,
          "createdAt": "2025-11-21T09:40:42.855Z"
        },
        {
          "id": 2,
          "text": "Developer creates .env file in apps/example with EXPO_PUBLIC_JAMENDO_CLIENT_ID=test_client_id",
          "deleted": false,
          "createdAt": "2025-11-21T09:40:48.109Z"
        },
        {
          "id": 3,
          "text": "Developer runs 'pnpm install' and all packages install successfully without errors",
          "deleted": false,
          "createdAt": "2025-11-21T09:40:52.932Z"
        },
        {
          "id": 4,
          "text": "Developer adds @jamendo/components as dependency in apps/example/package.json",
          "deleted": false,
          "createdAt": "2025-11-21T09:41:40.795Z"
        },
        {
          "id": 5,
          "text": "Developer adds @jamendo/rtk-services as dependency in apps/example/package.json",
          "deleted": false,
          "createdAt": "2025-11-21T09:41:45.790Z"
        }
      ],
      "nextExampleId": 6,
      "estimate": 2,
      "architectureNotes": [
        {
          "id": 0,
          "text": "Implementation approach: Add workspace dependencies (@jamendo/components, @jamendo/rtk-services) to apps/example/package.json using workspace:* protocol. Install npm packages (expo-audio, @shopify/flash-list) directly. Create .env file with EXPO_PUBLIC_JAMENDO_CLIENT_ID. Alignment: Follows existing monorepo structure and workspace dependency pattern already used for @jamendo/feature-home.",
          "deleted": false,
          "createdAt": "2025-11-21T09:51:00.983Z"
        }
      ],
      "nextNoteId": 1,
      "attachments": [
        "spec/attachments/JAM-001/ast-research-package-structure.json"
      ]
    },
    "JAM-002": {
      "id": "JAM-002",
      "title": "Configure RTK Services package with Jamendo API",
      "type": "story",
      "status": "done",
      "createdAt": "2025-11-21T09:26:21.095Z",
      "updatedAt": "2025-11-21T09:51:07.829Z",
      "description": "Create @jamendo/rtk-services package with baseApi, jamendoApi endpoints (searchTracks, getTrackDetail), TypeScript types, and Redux store configuration",
      "epic": "jamendo-app",
      "children": [],
      "dependsOn": [
        "JAM-001"
      ],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-11-21T09:35:26.830Z"
        },
        {
          "state": "testing",
          "timestamp": "2025-11-21T09:45:08.264Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-11-21T09:47:52.639Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-11-21T09:50:16.165Z"
        },
        {
          "state": "done",
          "timestamp": "2025-11-21T09:51:07.829Z"
        }
      ],
      "userStory": {
        "role": "mobile app developer",
        "action": "integrate Jamendo API using RTK Query",
        "benefit": "I can search tracks and fetch track details with automatic caching"
      },
      "rules": [
        {
          "id": 0,
          "text": "Base API must be configured with Jamendo API v3.0 endpoint (https://api.jamendo.com/v3.0)",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:20.620Z"
        },
        {
          "id": 1,
          "text": "All API requests must include client_id from EXPO_PUBLIC_JAMENDO_CLIENT_ID environment variable",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:21.580Z"
        },
        {
          "id": 2,
          "text": "Search endpoint must request minimal fields (id, name, artist_name, image) for optimal performance",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:22.547Z"
        },
        {
          "id": 3,
          "text": "Detail endpoint must request full track data including audio URL with mp31 format",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:23.628Z"
        },
        {
          "id": 4,
          "text": "Redux store must be configured with jamendoApi reducer and RTK Query middleware",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:24.691Z"
        },
        {
          "id": 5,
          "text": "API responses must be fully typed with TypeScript interfaces",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:25.791Z"
        },
        {
          "id": 6,
          "text": "When track detail returns empty results, endpoint must return a 'track not found' message instead of throwing an error",
          "deleted": false,
          "createdAt": "2025-11-21T09:40:32.517Z"
        }
      ],
      "nextRuleId": 7,
      "examples": [
        {
          "id": 0,
          "text": "Developer calls useSearchTracksQuery('jazz') and receives results with id, name, artist_name, and image fields only",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:37.983Z"
        },
        {
          "id": 1,
          "text": "Developer calls useGetTrackDetailQuery('12345') and receives full track data including audio URL",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:38.960Z"
        },
        {
          "id": 2,
          "text": "Search request is made to https://api.jamendo.com/v3.0/tracks with namesearch parameter and limit=20",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:39.934Z"
        },
        {
          "id": 3,
          "text": "Detail request is made to https://api.jamendo.com/v3.0/tracks with id parameter and audioformat=mp31",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:40.834Z"
        },
        {
          "id": 4,
          "text": "Store is created with jamendoApi reducer at 'jamendoApi' path and RTK Query middleware configured",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:41.741Z"
        },
        {
          "id": 5,
          "text": "Developer imports JamendoTrack, JamendoSearchResponse types and gets full TypeScript autocomplete",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:42.649Z"
        },
        {
          "id": 6,
          "text": "Detail endpoint transforms response array to single track object, throwing error if track not found",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:43.549Z"
        },
        {
          "id": 7,
          "text": "Developer calls useGetTrackDetailQuery('99999999') for non-existent track and receives {error: 'track not found'} response",
          "deleted": false,
          "createdAt": "2025-11-21T09:40:33.127Z"
        }
      ],
      "nextExampleId": 8,
      "questions": [
        {
          "id": 0,
          "text": "@human: Should the search endpoint use 'namesearch' parameter (searches track names and artist names), or should we also support other search types like 'search' (full-text) or 'artist_name'?",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:55.670Z",
          "selected": true,
          "answered": true,
          "answer": "Use 'namesearch' parameter (current implementation) which searches both track names and artist names"
        },
        {
          "id": 1,
          "text": "@human: When track detail is not found (empty results array), should we throw an error or return null/undefined?",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:56.633Z",
          "selected": true,
          "answered": true,
          "answer": "Return a message 'track not found' instead of throwing an error (needs implementation change)"
        },
        {
          "id": 2,
          "text": "@human: Should we validate that EXPO_PUBLIC_JAMENDO_CLIENT_ID is set, or let API requests fail with 401?",
          "deleted": false,
          "createdAt": "2025-11-21T09:38:57.593Z",
          "selected": true,
          "answered": true,
          "answer": "Let API requests fail with 401 - no upfront validation needed (current implementation is correct)"
        }
      ],
      "nextQuestionId": 3,
      "architectureNotes": [
        {
          "id": 0,
          "text": "RTK Query configuration using @reduxjs/toolkit with fetchBaseQuery. Base API endpoint: https://api.jamendo.com/v3.0. Search endpoint uses minimal fields (id, name, artist_name, image) for list views. Detail endpoint includes audio URL with mp31 format and musicinfo+lyrics.",
          "deleted": false,
          "createdAt": "2025-11-21T09:42:54.733Z"
        },
        {
          "id": 1,
          "text": "Implementation change needed: getTrackDetail transformResponse should return {error: 'track not found'} for empty results instead of throwing exception. This allows components to handle track-not-found gracefully without error boundaries.",
          "deleted": false,
          "createdAt": "2025-11-21T09:42:55.706Z"
        },
        {
          "id": 2,
          "text": "Store configuration exports configured store with jamendoApi reducer at 'jamendoApi' path and RTK Query middleware. Exports RootState and AppDispatch types for typed hooks. All API types (JamendoTrack, JamendoSearchResponse, JamendoTrackDetailResponse) exported for TypeScript autocomplete.",
          "deleted": false,
          "createdAt": "2025-11-21T09:42:56.665Z"
        }
      ],
      "nextNoteId": 3,
      "attachments": [
        "spec/attachments/JAM-002/ast-research-jamendoApi.json",
        "spec/attachments/JAM-002/ast-research-baseApi.json",
        "spec/attachments/JAM-002/ast-research-store.json"
      ],
      "updated": "2025-11-21T09:51:07.829Z"
    },
    "JAM-003": {
      "id": "JAM-003",
      "title": "Configure Components package with audio players and UI",
      "type": "story",
      "status": "backlog",
      "createdAt": "2025-11-21T09:26:26.102Z",
      "updatedAt": "2025-11-21T09:27:17.778Z",
      "description": "Create @jamendo/components package with ExpoAudioPlayer, AudioProPlayer, TrackCard, TrackList (FlashList), and SearchBar components",
      "epic": "jamendo-app",
      "children": [],
      "dependsOn": [
        "JAM-001"
      ]
    },
    "JAM-004": {
      "id": "JAM-004",
      "title": "Configure environment variables and Jamendo API client",
      "type": "story",
      "status": "backlog",
      "createdAt": "2025-11-21T09:26:32.154Z",
      "updatedAt": "2025-11-21T09:27:18.318Z",
      "description": "Setup .env file with EXPO_PUBLIC_JAMENDO_CLIENT_ID, update app.json for environment variables, create config.ts constants file",
      "epic": "jamendo-app",
      "children": [],
      "dependsOn": [
        "JAM-001"
      ]
    },
    "JAM-005": {
      "id": "JAM-005",
      "title": "Integrate Redux Provider in app root layout",
      "type": "story",
      "status": "specifying",
      "createdAt": "2025-11-21T09:26:39.216Z",
      "updatedAt": "2025-11-21T10:30:33.310Z",
      "description": "Update apps/example/app/_layout.tsx to wrap app with Redux Provider and configure store",
      "epic": "jamendo-app",
      "children": [],
      "dependsOn": [
        "JAM-002"
      ],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-11-21T10:23:33.057Z"
        }
      ],
      "userStory": {
        "role": "mobile app developer",
        "action": "use Redux state management throughout the app",
        "benefit": "I have centralized state and API caching available in all screens"
      },
      "questions": [
        {
          "id": 0,
          "text": "@human: Should Redux Provider wrap ThemeProvider, or vice versa? What's the correct nesting order for providers?",
          "deleted": false,
          "createdAt": "2025-11-21T10:25:17.090Z",
          "selected": true,
          "answered": true,
          "answer": "ThemeProvider wraps Redux Provider (Provider is nested inside ThemeProvider)"
        },
        {
          "id": 1,
          "text": "@human: Should we enable Redux DevTools integration for development builds?",
          "deleted": false,
          "createdAt": "2025-11-21T10:25:18.043Z",
          "selected": true,
          "answered": true,
          "answer": "Yes, enable Redux DevTools integration for development builds"
        }
      ],
      "nextQuestionId": 2,
      "rules": [
        {
          "id": 0,
          "text": "Redux Provider must be placed in the root layout to make store accessible to all screens",
          "deleted": false,
          "createdAt": "2025-11-21T10:25:18.965Z"
        },
        {
          "id": 1,
          "text": "Provider must be configured with the store from @jamendo/rtk-services package",
          "deleted": false,
          "createdAt": "2025-11-21T10:25:19.846Z"
        },
        {
          "id": 2,
          "text": "Integration must not break existing navigation or theme functionality",
          "deleted": false,
          "createdAt": "2025-11-21T10:25:20.785Z"
        },
        {
          "id": 3,
          "text": "Redux DevTools must be enabled in development builds for debugging",
          "deleted": false,
          "createdAt": "2025-11-21T10:26:48.131Z"
        }
      ],
      "nextRuleId": 4,
      "examples": [
        {
          "id": 0,
          "text": "Developer imports Provider and store in _layout.tsx and wraps app tree",
          "deleted": false,
          "createdAt": "2025-11-21T10:25:30.744Z"
        },
        {
          "id": 1,
          "text": "Screen component uses useSearchTracksQuery hook and successfully fetches data through Redux store",
          "deleted": false,
          "createdAt": "2025-11-21T10:25:31.661Z"
        },
        {
          "id": 2,
          "text": "User switches between light and dark themes, theme continues to work with Redux Provider present",
          "deleted": false,
          "createdAt": "2025-11-21T10:25:32.579Z"
        },
        {
          "id": 3,
          "text": "User navigates between tabs, navigation works normally with Redux store available",
          "deleted": false,
          "createdAt": "2025-11-21T10:25:33.458Z"
        },
        {
          "id": 4,
          "text": "Developer opens Redux DevTools in development build and sees current store state with API cache",
          "deleted": false,
          "createdAt": "2025-11-21T10:26:48.744Z"
        }
      ],
      "nextExampleId": 5,
      "estimate": 3
    },
    "JAM-006": {
      "id": "JAM-006",
      "title": "Build Home page with search and track results",
      "type": "story",
      "status": "backlog",
      "createdAt": "2025-11-21T09:26:45.533Z",
      "updatedAt": "2025-11-21T09:27:29.895Z",
      "description": "Implement search screen at apps/example/app/(tabs)/index.tsx with SearchBar, RTK Query integration (useSearchTracksQuery), TrackList with FlashList, and navigation to track detail",
      "epic": "jamendo-app",
      "children": [],
      "dependsOn": [
        "JAM-002",
        "JAM-003",
        "JAM-004",
        "JAM-005"
      ]
    },
    "JAM-007": {
      "id": "JAM-007",
      "title": "Build Track detail page with dual audio players",
      "type": "story",
      "status": "backlog",
      "createdAt": "2025-11-21T09:26:51.233Z",
      "updatedAt": "2025-11-21T09:27:34.439Z",
      "description": "Implement track detail screen at apps/example/app/track/[id].tsx with ScrollView layout, track information, and both ExpoAudioPlayer and AudioProPlayer for comparison",
      "epic": "jamendo-app",
      "children": [],
      "dependsOn": [
        "JAM-002",
        "JAM-003"
      ]
    },
    "JAM-008": {
      "id": "JAM-008",
      "title": "Update navigation and tab bar configuration",
      "type": "story",
      "status": "backlog",
      "createdAt": "2025-11-21T09:26:56.462Z",
      "updatedAt": "2025-11-21T09:27:38.524Z",
      "description": "Update apps/example/app/(tabs)/_layout.tsx to rename tabs, add music-related icons, and configure stack navigation for track detail page",
      "epic": "jamendo-app",
      "children": [],
      "dependsOn": [
        "JAM-006",
        "JAM-007"
      ]
    },
    "JAM-009": {
      "id": "JAM-009",
      "title": "Testing and validation of complete app",
      "type": "story",
      "status": "backlog",
      "createdAt": "2025-11-21T09:27:01.827Z",
      "updatedAt": "2025-11-21T09:27:42.613Z",
      "description": "Verify API usage optimization (minimal vs full fields), test both audio player implementations, validate FlashList performance, test navigation flow, and verify Redux DevTools integration",
      "epic": "jamendo-app",
      "children": [],
      "dependsOn": [
        "JAM-008"
      ]
    }
  },
  "states": {
    "backlog": [
      "COMP-001",
      "JAM-003",
      "JAM-004",
      "JAM-006",
      "JAM-007",
      "JAM-008",
      "JAM-009"
    ],
    "specifying": [
      "JAM-005"
    ],
    "testing": [],
    "implementing": [
      "JAM-001"
    ],
    "validating": [],
    "done": [
      "JAM-002",
      "FOUND-001"
    ],
    "blocked": []
  },
  "prefixCounters": {
    "COMP": 1,
    "JAM": 9
  }
}